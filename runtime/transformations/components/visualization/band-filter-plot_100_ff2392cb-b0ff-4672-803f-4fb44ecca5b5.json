{
  "category": "Visualization",
  "content": "\"\"\"Documentation for Band Filter Plot\n\n# Band Filter Plot\n\n## Description\nThis component visualizes calculated band filter statistics. These statistics include the median and median absolute deviation (MAD) for a moving window.\n\n## Inputs\n* **band_filter_dataframe** (Pandas DataFrame): The band filter statistics to be plotted including the original values, the calculated statistics and the filter mask.\n\n## Outputs\n* **band_filter_plot** (Plotly JSON): The generated Plotly JSON. This is used by the hetida designer frontend for plotting the results.\n\n## Details\nThis component visualizes a band filter using the calculated statistics. The input dataframe **band_filter_dataframe** needs to have timestamps as indices. In addition it needs to have the following columns:\n* *value* (Float): Series for which the statistics were calculated.\n* *band_center* (Float): Calculated center of the band.\n* *rolling_deviation* (Float): Calculated deviation of the band. These values equal half the width of the band.\n* *filter_mask* (Boolean): Information if a datapoint is an inlier or outlier. False equals outlier.\n\n## Examples\nThe json input of a typical call of this component is\n```\n{\n    \"band_filter_dataframe\": {\n        \"values\": {\n            \"2022-01-01T00:00:00.000Z\":1.058,\n            \"2022-01-01T00:20:48.000Z\":0.699,\n            \"2022-01-01T00:41:37.000Z\":1.08,\n            \"2022-01-01T01:02:26.000Z\":1.054,\n            \"2022-01-01T01:23:15.000Z\":0.763,\n            \"2022-01-01T01:44:04.000Z\":1.034,\n            \"2022-01-01T02:04:53.000Z\":0.965,\n            \"2022-01-01T02:25:42.000Z\":0.601,\n            \"2022-01-01T02:46:31.000Z\":0.933,\n            \"2022-01-01T03:07:20.000Z\":1.081,\n            \"2022-01-01T03:28:09.000Z\":2.1,\n            \"2022-01-01T03:48:58.000Z\":0.988,\n            \"2022-01-01T04:09:47.000Z\":0.741,\n            \"2022-01-01T04:30:36.000Z\":0.647,\n            \"2022-01-01T04:51:25.000Z\":0.556,\n            \"2022-01-01T05:12:14.000Z\":0.453,\n            \"2022-01-01T05:33:03.000Z\":1.009,\n            \"2022-01-01T05:53:52.000Z\":1.72,\n            \"2022-01-01T06:14:41.000Z\":1.002,\n            \"2022-01-01T06:56:19.000Z\":0.857,\n            \"2022-01-01T07:17:08.000Z\":0.864,\n            \"2022-01-01T07:37:57.000Z\":0.606,\n            \"2022-01-01T07:58:46.000Z\":0.899,\n            \"2022-01-01T08:40:24.000Z\":0.62,\n            \"2022-01-01T10:03:40.000Z\":0.721,\n            \"2022-01-01T10:24:29.000Z\":1.193,\n            \"2022-01-01T10:45:18.000Z\":0.833,\n            \"2022-01-01T11:06:07.000Z\":2.06,\n            \"2022-01-01T11:26:56.000Z\":0.68,\n            \"2022-01-01T11:47:45.000Z\":1.136,\n            \"2022-01-01T12:08:34.000Z\":0.62,\n            \"2022-01-01T12:29:23.000Z\":0.946,\n            \"2022-01-01T12:50:12.000Z\":0.746,\n            \"2022-01-01T13:11:01.000Z\":0.833,\n            \"2022-01-01T13:31:50.000Z\":0.857,\n            \"2022-01-01T14:13:28.000Z\":0.947,\n            \"2022-01-01T14:34:17.000Z\":0.841,\n            \"2022-01-01T14:55:06.000Z\":0.668,\n            \"2022-01-01T15:15:55.000Z\":0.675,\n            \"2022-01-01T15:36:44.000Z\":0.84,\n            \"2022-01-01T15:57:33.000Z\":0.821,\n            \"2022-01-01T16:18:22.000Z\":0.625,\n            \"2022-01-01T16:39:11.000Z\":1.155,\n            \"2022-01-01T17:00:00.000Z\":0.968\n        },\n        \"band_center\":{\n            \"2022-01-01T00:41:37.000Z\":0.9995,\n            \"2022-01-01T01:02:26.000Z\":1.034,\n            \"2022-01-01T01:23:15.000Z\":1.011,\n            \"2022-01-01T01:44:04.000Z\":0.988,\n            \"2022-01-01T02:04:53.000Z\":0.9765,\n            \"2022-01-01T02:25:42.000Z\":0.965,\n            \"2022-01-01T02:46:31.000Z\":0.949,\n            \"2022-01-01T03:07:20.000Z\":0.949,\n            \"2022-01-01T03:28:09.000Z\":0.949,\n            \"2022-01-01T03:48:58.000Z\":0.9765,\n            \"2022-01-01T04:09:47.000Z\":0.965,\n            \"2022-01-01T04:30:36.000Z\":0.933,\n            \"2022-01-01T04:51:25.000Z\":0.933,\n            \"2022-01-01T05:12:14.000Z\":0.864,\n            \"2022-01-01T05:33:03.000Z\":0.864,\n            \"2022-01-01T05:53:52.000Z\":0.8605,\n            \"2022-01-01T06:14:41.000Z\":0.799,\n            \"2022-01-01T06:56:19.000Z\":0.8605,\n            \"2022-01-01T10:03:40.000Z\":0.866,\n            \"2022-01-01T10:24:29.000Z\":0.7895,\n            \"2022-01-01T10:45:18.000Z\":0.833,\n            \"2022-01-01T11:06:07.000Z\":0.833,\n            \"2022-01-01T11:26:56.000Z\":0.833,\n            \"2022-01-01T11:47:45.000Z\":0.845,\n            \"2022-01-01T12:08:34.000Z\":0.841,\n            \"2022-01-01T12:29:23.000Z\":0.841,\n            \"2022-01-01T12:50:12.000Z\":0.833,\n            \"2022-01-01T13:11:01.000Z\":0.84,\n            \"2022-01-01T13:31:50.000Z\":0.833,\n            \"2022-01-01T14:13:28.000Z\":0.833,\n            \"2022-01-01T14:34:17.000Z\":0.84,\n            \"2022-01-01T14:55:06.000Z\":0.8365,\n            \"2022-01-01T15:15:55.000Z\":0.84,\n            \"2022-01-01T15:36:44.000Z\":0.8405\n        },\n        \"rolling_deviation\":{\n            \"2022-01-01T00:41:37.000Z\":0.511497,\n            \"2022-01-01T01:02:26.000Z\":0.511497,\n            \"2022-01-01T01:23:15.000Z\":0.511497,\n            \"2022-01-01T01:44:04.000Z\":0.511497,\n            \"2022-01-01T02:04:53.000Z\":0.511497,\n            \"2022-01-01T02:25:42.000Z\":0.5159448,\n            \"2022-01-01T02:46:31.000Z\":0.7072002,\n            \"2022-01-01T03:07:20.000Z\":0.7072002,\n            \"2022-01-01T03:28:09.000Z\":0.8762166,\n            \"2022-01-01T03:48:58.000Z\":0.756126,\n            \"2022-01-01T04:09:47.000Z\":0.9963072,\n            \"2022-01-01T04:30:36.000Z\":0.8539776,\n            \"2022-01-01T04:51:25.000Z\":0.6582744,\n            \"2022-01-01T05:12:14.000Z\":0.9651726,\n            \"2022-01-01T05:33:03.000Z\":0.644931,\n            \"2022-01-01T05:53:52.000Z\":0.644931,\n            \"2022-01-01T06:14:41.000Z\":0.8272908,\n            \"2022-01-01T06:56:19.000Z\":0.8650971,\n            \"2022-01-01T10:03:40.000Z\":0.9607248,\n            \"2022-01-01T10:24:29.000Z\":0.7249914,\n            \"2022-01-01T10:45:18.000Z\":0.6805134,\n            \"2022-01-01T11:06:07.000Z\":0.511497,\n            \"2022-01-01T11:26:56.000Z\":0.511497,\n            \"2022-01-01T11:47:45.000Z\":0.511497,\n            \"2022-01-01T12:08:34.000Z\":0.511497,\n            \"2022-01-01T12:29:23.000Z\":0.511497,\n            \"2022-01-01T12:50:12.000Z\":0.511497,\n            \"2022-01-01T13:11:01.000Z\":0.511497,\n            \"2022-01-01T13:31:50.000Z\":0.511497,\n            \"2022-01-01T14:13:28.000Z\":0.511497,\n            \"2022-01-01T14:34:17.000Z\":0.511497,\n            \"2022-01-01T14:55:06.000Z\":0.511497,\n            \"2022-01-01T15:15:55.000Z\":0.511497,\n            \"2022-01-01T15:36:44.000Z\":0.5203926\n        },\n        \"filter_mask\":{\n            \"2022-01-01T00:00:00.000Z\":true,\n            \"2022-01-01T00:20:48.000Z\":true,\n            \"2022-01-01T00:41:37.000Z\":true,\n            \"2022-01-01T01:02:26.000Z\":true,\n            \"2022-01-01T01:23:15.000Z\":true,\n            \"2022-01-01T01:44:04.000Z\":true,\n            \"2022-01-01T02:04:53.000Z\":true,\n            \"2022-01-01T02:25:42.000Z\":true,\n            \"2022-01-01T02:46:31.000Z\":true,\n            \"2022-01-01T03:07:20.000Z\":true,\n            \"2022-01-01T03:28:09.000Z\":false,\n            \"2022-01-01T03:48:58.000Z\":true,\n            \"2022-01-01T04:09:47.000Z\":true,\n            \"2022-01-01T04:30:36.000Z\":true,\n            \"2022-01-01T04:51:25.000Z\":true,\n            \"2022-01-01T05:12:14.000Z\":true,\n            \"2022-01-01T05:33:03.000Z\":true,\n            \"2022-01-01T05:53:52.000Z\":false,\n            \"2022-01-01T06:14:41.000Z\":true,\n            \"2022-01-01T06:56:19.000Z\":true,\n            \"2022-01-01T07:17:08.000Z\":true,\n            \"2022-01-01T07:37:57.000Z\":true,\n            \"2022-01-01T07:58:46.000Z\":true,\n            \"2022-01-01T08:40:24.000Z\":true,\n            \"2022-01-01T10:03:40.000Z\":true,\n            \"2022-01-01T10:24:29.000Z\":true,\n            \"2022-01-01T10:45:18.000Z\":true,\n            \"2022-01-01T11:06:07.000Z\":false,\n            \"2022-01-01T11:26:56.000Z\":true,\n            \"2022-01-01T11:47:45.000Z\":true,\n            \"2022-01-01T12:08:34.000Z\":true,\n            \"2022-01-01T12:29:23.000Z\":true,\n            \"2022-01-01T12:50:12.000Z\":true,\n            \"2022-01-01T13:11:01.000Z\":true,\n            \"2022-01-01T13:31:50.000Z\":true,\n            \"2022-01-01T14:13:28.000Z\":true,\n            \"2022-01-01T14:34:17.000Z\":true,\n            \"2022-01-01T14:55:06.000Z\":true,\n            \"2022-01-01T15:15:55.000Z\":true,\n            \"2022-01-01T15:36:44.000Z\":true,\n            \"2022-01-01T15:57:33.000Z\":true,\n            \"2022-01-01T16:18:22.000Z\":true,\n            \"2022-01-01T16:39:11.000Z\":true,\n            \"2022-01-01T17:00:00.000Z\":true\n        }\n    }\n}\n```\n\"\"\"\n\nfrom hdutils import plotly_fig_to_json_dict\n\nimport pandas as pd\n\nfrom plotly.graph_objects import Figure\n\nimport plotly.io as pio\n\npio.templates.default = None\n\n\ndef band_filter_plot(\n    band_filter_dataframe: pd.DataFrame,\n    layout_opts: dict = {\n        \"xaxis_title\": \"Time\",\n        \"yaxis_title\": \"Values\",\n        \"autosize\": True,\n        \"height\": 200,\n    },\n) -> Figure:\n    \"\"\"Create a band filter Plotly figure\n\n    band_filter_dataframe (Pandas DataFrame): DataFrame with the band filter statistics\n        to be plotted including the series (column name: values), the calculated statistics\n        (column name: band_center, column name: rolling_deviation) and the filter mask\n        (column name: filter_mask).\n    layout_opts (Dictionary): Layout options for the plot.\n\n    Returns: Plotly figure object.\n    \"\"\"\n    fig = Figure()\n\n    # Add the data points and mark the outliers.\n    fig.add_scatter(\n        x=band_filter_dataframe.index[band_filter_dataframe[\"filter_mask\"] == False],\n        y=band_filter_dataframe[\"values\"][\n            band_filter_dataframe[\"filter_mask\"] == False\n        ],\n        mode=\"markers\",\n        name=\"Outlier\",\n        marker_color=\"red\",\n    )\n    fig.add_scatter(\n        x=band_filter_dataframe.index[band_filter_dataframe[\"filter_mask\"] == True],\n        y=band_filter_dataframe[\"values\"][band_filter_dataframe[\"filter_mask\"] == True],\n        mode=\"markers\",\n        name=\"Inlier\",\n        marker_color=\"slategray\",\n    )\n\n    # Add the band center.\n    fig.add_scatter(\n        x=band_filter_dataframe.index,\n        y=band_filter_dataframe[\"band_center\"],\n        name=\"Moving Window Median\",\n        line_color=\"limegreen\",\n    )\n\n    # Add the limits.\n    fig.add_scatter(\n        x=band_filter_dataframe.index,\n        y=band_filter_dataframe[\"band_center\"]\n        + band_filter_dataframe[\"rolling_deviation\"],\n        name=\"Upper limit\",\n        line_color=\"orange\",\n    )\n    fig.add_scatter(\n        x=band_filter_dataframe.index,\n        y=band_filter_dataframe[\"band_center\"]\n        - band_filter_dataframe[\"rolling_deviation\"],\n        name=\"Lower limit\",\n        line_color=\"orange\",\n    )\n\n    # Set the layout.\n    fig.update_layout(**layout_opts)\n\n    # Set the margins.\n    fig.update_layout(margin=dict(l=0, r=0, b=0, t=5, pad=0))\n    fig.update_yaxes(automargin=True)\n    fig.update_xaxes(automargin=True)\n\n    return fig\n\n\n# ***** DO NOT EDIT LINES BELOW *****\n# These lines may be overwritten if component details or inputs/outputs change.\nCOMPONENT_INFO = {\n    \"inputs\": {\n        \"band_filter_dataframe\": {\"data_type\": \"DATAFRAME\"},\n    },\n    \"outputs\": {\n        \"band_filter_plot\": {\"data_type\": \"PLOTLYJSON\"},\n    },\n    \"name\": \"Band Filter Plot\",\n    \"category\": \"Visualization\",\n    \"description\": \"Plotting a band filter dataframe\",\n    \"version_tag\": \"1.0.0\",\n    \"id\": \"ff2392cb-b0ff-4672-803f-4fb44ecca5b5\",\n    \"revision_group_id\": \"02836778-e7d9-4352-952d-9927f34b58fe\",\n    \"state\": \"RELEASED\",\n    \"released_timestamp\": \"2022-11-24T16:55:17.221127+00:00\",\n}\n\nfrom hdutils import parse_default_value  # noqa: E402, F401\n\n\ndef main(*, band_filter_dataframe):\n    # entrypoint function for this component\n    # ***** DO NOT EDIT LINES ABOVE *****\n    # write your function code here.\n    return {\n        \"band_filter_plot\": plotly_fig_to_json_dict(\n            band_filter_plot(band_filter_dataframe)\n        )\n    }\n\n\nTEST_WIRING_FROM_PY_FILE_IMPORT = {\n    \"input_wirings\": [\n        {\n            \"workflow_input_name\": \"band_filter_dataframe\",\n            \"adapter_id\": \"direct_provisioning\",\n            \"filters\": {\n                \"value\": '{\\n    \"values\": {\\n        \"2022-01-01T00:00:00.000Z\":1.058,\\n        \"2022-01-01T00:20:48.000Z\":0.699,\\n        \"2022-01-01T00:41:37.000Z\":1.08,\\n        \"2022-01-01T01:02:26.000Z\":1.054,\\n        \"2022-01-01T01:23:15.000Z\":0.763,\\n        \"2022-01-01T01:44:04.000Z\":1.034,\\n        \"2022-01-01T02:04:53.000Z\":0.965,\\n        \"2022-01-01T02:25:42.000Z\":0.601,\\n        \"2022-01-01T02:46:31.000Z\":0.933,\\n        \"2022-01-01T03:07:20.000Z\":1.081,\\n        \"2022-01-01T03:28:09.000Z\":2.1,\\n        \"2022-01-01T03:48:58.000Z\":0.988,\\n        \"2022-01-01T04:09:47.000Z\":0.741,\\n        \"2022-01-01T04:30:36.000Z\":0.647,\\n        \"2022-01-01T04:51:25.000Z\":0.556,\\n        \"2022-01-01T05:12:14.000Z\":0.453,\\n        \"2022-01-01T05:33:03.000Z\":1.009,\\n        \"2022-01-01T05:53:52.000Z\":1.72,\\n        \"2022-01-01T06:14:41.000Z\":1.002,\\n        \"2022-01-01T06:56:19.000Z\":0.857,\\n        \"2022-01-01T07:17:08.000Z\":0.864,\\n        \"2022-01-01T07:37:57.000Z\":0.606,\\n        \"2022-01-01T07:58:46.000Z\":0.899,\\n        \"2022-01-01T08:40:24.000Z\":0.62,\\n        \"2022-01-01T10:03:40.000Z\":0.721,\\n        \"2022-01-01T10:24:29.000Z\":1.193,\\n        \"2022-01-01T10:45:18.000Z\":0.833,\\n        \"2022-01-01T11:06:07.000Z\":2.06,\\n        \"2022-01-01T11:26:56.000Z\":0.68,\\n        \"2022-01-01T11:47:45.000Z\":1.136,\\n        \"2022-01-01T12:08:34.000Z\":0.62,\\n        \"2022-01-01T12:29:23.000Z\":0.946,\\n        \"2022-01-01T12:50:12.000Z\":0.746,\\n        \"2022-01-01T13:11:01.000Z\":0.833,\\n        \"2022-01-01T13:31:50.000Z\":0.857,\\n        \"2022-01-01T14:13:28.000Z\":0.947,\\n        \"2022-01-01T14:34:17.000Z\":0.841,\\n        \"2022-01-01T14:55:06.000Z\":0.668,\\n        \"2022-01-01T15:15:55.000Z\":0.675,\\n        \"2022-01-01T15:36:44.000Z\":0.84,\\n        \"2022-01-01T15:57:33.000Z\":0.821,\\n        \"2022-01-01T16:18:22.000Z\":0.625,\\n        \"2022-01-01T16:39:11.000Z\":1.155,\\n        \"2022-01-01T17:00:00.000Z\":0.968\\n    },\\n    \"band_center\":{\\n        \"2022-01-01T00:41:37.000Z\":0.9995,\\n        \"2022-01-01T01:02:26.000Z\":1.034,\\n        \"2022-01-01T01:23:15.000Z\":1.011,\\n        \"2022-01-01T01:44:04.000Z\":0.988,\\n        \"2022-01-01T02:04:53.000Z\":0.9765,\\n        \"2022-01-01T02:25:42.000Z\":0.965,\\n        \"2022-01-01T02:46:31.000Z\":0.949,\\n        \"2022-01-01T03:07:20.000Z\":0.949,\\n        \"2022-01-01T03:28:09.000Z\":0.949,\\n        \"2022-01-01T03:48:58.000Z\":0.9765,\\n        \"2022-01-01T04:09:47.000Z\":0.965,\\n        \"2022-01-01T04:30:36.000Z\":0.933,\\n        \"2022-01-01T04:51:25.000Z\":0.933,\\n        \"2022-01-01T05:12:14.000Z\":0.864,\\n        \"2022-01-01T05:33:03.000Z\":0.864,\\n        \"2022-01-01T05:53:52.000Z\":0.8605,\\n        \"2022-01-01T06:14:41.000Z\":0.799,\\n        \"2022-01-01T06:56:19.000Z\":0.8605,\\n        \"2022-01-01T10:03:40.000Z\":0.866,\\n        \"2022-01-01T10:24:29.000Z\":0.7895,\\n        \"2022-01-01T10:45:18.000Z\":0.833,\\n        \"2022-01-01T11:06:07.000Z\":0.833,\\n        \"2022-01-01T11:26:56.000Z\":0.833,\\n        \"2022-01-01T11:47:45.000Z\":0.845,\\n        \"2022-01-01T12:08:34.000Z\":0.841,\\n        \"2022-01-01T12:29:23.000Z\":0.841,\\n        \"2022-01-01T12:50:12.000Z\":0.833,\\n        \"2022-01-01T13:11:01.000Z\":0.84,\\n        \"2022-01-01T13:31:50.000Z\":0.833,\\n        \"2022-01-01T14:13:28.000Z\":0.833,\\n        \"2022-01-01T14:34:17.000Z\":0.84,\\n        \"2022-01-01T14:55:06.000Z\":0.8365,\\n        \"2022-01-01T15:15:55.000Z\":0.84,\\n        \"2022-01-01T15:36:44.000Z\":0.8405\\n    },\\n    \"rolling_deviation\":{\\n        \"2022-01-01T00:41:37.000Z\":0.511497,\\n        \"2022-01-01T01:02:26.000Z\":0.511497,\\n        \"2022-01-01T01:23:15.000Z\":0.511497,\\n        \"2022-01-01T01:44:04.000Z\":0.511497,\\n        \"2022-01-01T02:04:53.000Z\":0.511497,\\n        \"2022-01-01T02:25:42.000Z\":0.5159448,\\n        \"2022-01-01T02:46:31.000Z\":0.7072002,\\n        \"2022-01-01T03:07:20.000Z\":0.7072002,\\n        \"2022-01-01T03:28:09.000Z\":0.8762166,\\n        \"2022-01-01T03:48:58.000Z\":0.756126,\\n        \"2022-01-01T04:09:47.000Z\":0.9963072,\\n        \"2022-01-01T04:30:36.000Z\":0.8539776,\\n        \"2022-01-01T04:51:25.000Z\":0.6582744,\\n        \"2022-01-01T05:12:14.000Z\":0.9651726,\\n        \"2022-01-01T05:33:03.000Z\":0.644931,\\n        \"2022-01-01T05:53:52.000Z\":0.644931,\\n        \"2022-01-01T06:14:41.000Z\":0.8272908,\\n        \"2022-01-01T06:56:19.000Z\":0.8650971,\\n        \"2022-01-01T10:03:40.000Z\":0.9607248,\\n        \"2022-01-01T10:24:29.000Z\":0.7249914,\\n        \"2022-01-01T10:45:18.000Z\":0.6805134,\\n        \"2022-01-01T11:06:07.000Z\":0.511497,\\n        \"2022-01-01T11:26:56.000Z\":0.511497,\\n        \"2022-01-01T11:47:45.000Z\":0.511497,\\n        \"2022-01-01T12:08:34.000Z\":0.511497,\\n        \"2022-01-01T12:29:23.000Z\":0.511497,\\n        \"2022-01-01T12:50:12.000Z\":0.511497,\\n        \"2022-01-01T13:11:01.000Z\":0.511497,\\n        \"2022-01-01T13:31:50.000Z\":0.511497,\\n        \"2022-01-01T14:13:28.000Z\":0.511497,\\n        \"2022-01-01T14:34:17.000Z\":0.511497,\\n        \"2022-01-01T14:55:06.000Z\":0.511497,\\n        \"2022-01-01T15:15:55.000Z\":0.511497,\\n        \"2022-01-01T15:36:44.000Z\":0.5203926\\n    },\\n    \"filter_mask\":{\\n        \"2022-01-01T00:00:00.000Z\":true,\\n        \"2022-01-01T00:20:48.000Z\":true,\\n        \"2022-01-01T00:41:37.000Z\":true,\\n        \"2022-01-01T01:02:26.000Z\":true,\\n        \"2022-01-01T01:23:15.000Z\":true,\\n        \"2022-01-01T01:44:04.000Z\":true,\\n        \"2022-01-01T02:04:53.000Z\":true,\\n        \"2022-01-01T02:25:42.000Z\":true,\\n        \"2022-01-01T02:46:31.000Z\":true,\\n        \"2022-01-01T03:07:20.000Z\":true,\\n        \"2022-01-01T03:28:09.000Z\":false,\\n        \"2022-01-01T03:48:58.000Z\":true,\\n        \"2022-01-01T04:09:47.000Z\":true,\\n        \"2022-01-01T04:30:36.000Z\":true,\\n        \"2022-01-01T04:51:25.000Z\":true,\\n        \"2022-01-01T05:12:14.000Z\":true,\\n        \"2022-01-01T05:33:03.000Z\":true,\\n        \"2022-01-01T05:53:52.000Z\":false,\\n        \"2022-01-01T06:14:41.000Z\":true,\\n        \"2022-01-01T06:56:19.000Z\":true,\\n        \"2022-01-01T07:17:08.000Z\":true,\\n        \"2022-01-01T07:37:57.000Z\":true,\\n        \"2022-01-01T07:58:46.000Z\":true,\\n        \"2022-01-01T08:40:24.000Z\":true,\\n        \"2022-01-01T10:03:40.000Z\":true,\\n        \"2022-01-01T10:24:29.000Z\":true,\\n        \"2022-01-01T10:45:18.000Z\":true,\\n        \"2022-01-01T11:06:07.000Z\":false,\\n        \"2022-01-01T11:26:56.000Z\":true,\\n        \"2022-01-01T11:47:45.000Z\":true,\\n        \"2022-01-01T12:08:34.000Z\":true,\\n        \"2022-01-01T12:29:23.000Z\":true,\\n        \"2022-01-01T12:50:12.000Z\":true,\\n        \"2022-01-01T13:11:01.000Z\":true,\\n        \"2022-01-01T13:31:50.000Z\":true,\\n        \"2022-01-01T14:13:28.000Z\":true,\\n        \"2022-01-01T14:34:17.000Z\":true,\\n        \"2022-01-01T14:55:06.000Z\":true,\\n        \"2022-01-01T15:15:55.000Z\":true,\\n        \"2022-01-01T15:36:44.000Z\":true,\\n        \"2022-01-01T15:57:33.000Z\":true,\\n        \"2022-01-01T16:18:22.000Z\":true,\\n        \"2022-01-01T16:39:11.000Z\":true,\\n        \"2022-01-01T17:00:00.000Z\":true\\n    }\\n}'\n            },\n        }\n    ]\n}\n",
  "description": "Plotting a band filter dataframe",
  "documentation": "# Band Filter Plot\n\n## Description\nThis component visualizes calculated band filter statistics. These statistics include the median and median absolute deviation (MAD) for a moving window.\n\n## Inputs\n* **band_filter_dataframe** (Pandas DataFrame): The band filter statistics to be plotted including the original values, the calculated statistics and the filter mask.\n\n## Outputs\n* **band_filter_plot** (Plotly JSON): The generated Plotly JSON. This is used by the hetida designer frontend for plotting the results.\n\n## Details\nThis component visualizes a band filter using the calculated statistics. The input dataframe **band_filter_dataframe** needs to have timestamps as indices. In addition it needs to have the following columns:\n* *value* (Float): Series for which the statistics were calculated.\n* *band_center* (Float): Calculated center of the band.\n* *rolling_deviation* (Float): Calculated deviation of the band. These values equal half the width of the band.\n* *filter_mask* (Boolean): Information if a datapoint is an inlier or outlier. False equals outlier.\n\n## Examples\nThe json input of a typical call of this component is\n```\n{\n    \"band_filter_dataframe\": {\n        \"values\": {\n            \"2022-01-01T00:00:00.000Z\":1.058,\n            \"2022-01-01T00:20:48.000Z\":0.699,\n            \"2022-01-01T00:41:37.000Z\":1.08,\n            \"2022-01-01T01:02:26.000Z\":1.054,\n            \"2022-01-01T01:23:15.000Z\":0.763,\n            \"2022-01-01T01:44:04.000Z\":1.034,\n            \"2022-01-01T02:04:53.000Z\":0.965,\n            \"2022-01-01T02:25:42.000Z\":0.601,\n            \"2022-01-01T02:46:31.000Z\":0.933,\n            \"2022-01-01T03:07:20.000Z\":1.081,\n            \"2022-01-01T03:28:09.000Z\":2.1,\n            \"2022-01-01T03:48:58.000Z\":0.988,\n            \"2022-01-01T04:09:47.000Z\":0.741,\n            \"2022-01-01T04:30:36.000Z\":0.647,\n            \"2022-01-01T04:51:25.000Z\":0.556,\n            \"2022-01-01T05:12:14.000Z\":0.453,\n            \"2022-01-01T05:33:03.000Z\":1.009,\n            \"2022-01-01T05:53:52.000Z\":1.72,\n            \"2022-01-01T06:14:41.000Z\":1.002,\n            \"2022-01-01T06:56:19.000Z\":0.857,\n            \"2022-01-01T07:17:08.000Z\":0.864,\n            \"2022-01-01T07:37:57.000Z\":0.606,\n            \"2022-01-01T07:58:46.000Z\":0.899,\n            \"2022-01-01T08:40:24.000Z\":0.62,\n            \"2022-01-01T10:03:40.000Z\":0.721,\n            \"2022-01-01T10:24:29.000Z\":1.193,\n            \"2022-01-01T10:45:18.000Z\":0.833,\n            \"2022-01-01T11:06:07.000Z\":2.06,\n            \"2022-01-01T11:26:56.000Z\":0.68,\n            \"2022-01-01T11:47:45.000Z\":1.136,\n            \"2022-01-01T12:08:34.000Z\":0.62,\n            \"2022-01-01T12:29:23.000Z\":0.946,\n            \"2022-01-01T12:50:12.000Z\":0.746,\n            \"2022-01-01T13:11:01.000Z\":0.833,\n            \"2022-01-01T13:31:50.000Z\":0.857,\n            \"2022-01-01T14:13:28.000Z\":0.947,\n            \"2022-01-01T14:34:17.000Z\":0.841,\n            \"2022-01-01T14:55:06.000Z\":0.668,\n            \"2022-01-01T15:15:55.000Z\":0.675,\n            \"2022-01-01T15:36:44.000Z\":0.84,\n            \"2022-01-01T15:57:33.000Z\":0.821,\n            \"2022-01-01T16:18:22.000Z\":0.625,\n            \"2022-01-01T16:39:11.000Z\":1.155,\n            \"2022-01-01T17:00:00.000Z\":0.968\n        },\n        \"band_center\":{\n            \"2022-01-01T00:41:37.000Z\":0.9995,\n            \"2022-01-01T01:02:26.000Z\":1.034,\n            \"2022-01-01T01:23:15.000Z\":1.011,\n            \"2022-01-01T01:44:04.000Z\":0.988,\n            \"2022-01-01T02:04:53.000Z\":0.9765,\n            \"2022-01-01T02:25:42.000Z\":0.965,\n            \"2022-01-01T02:46:31.000Z\":0.949,\n            \"2022-01-01T03:07:20.000Z\":0.949,\n            \"2022-01-01T03:28:09.000Z\":0.949,\n            \"2022-01-01T03:48:58.000Z\":0.9765,\n            \"2022-01-01T04:09:47.000Z\":0.965,\n            \"2022-01-01T04:30:36.000Z\":0.933,\n            \"2022-01-01T04:51:25.000Z\":0.933,\n            \"2022-01-01T05:12:14.000Z\":0.864,\n            \"2022-01-01T05:33:03.000Z\":0.864,\n            \"2022-01-01T05:53:52.000Z\":0.8605,\n            \"2022-01-01T06:14:41.000Z\":0.799,\n            \"2022-01-01T06:56:19.000Z\":0.8605,\n            \"2022-01-01T10:03:40.000Z\":0.866,\n            \"2022-01-01T10:24:29.000Z\":0.7895,\n            \"2022-01-01T10:45:18.000Z\":0.833,\n            \"2022-01-01T11:06:07.000Z\":0.833,\n            \"2022-01-01T11:26:56.000Z\":0.833,\n            \"2022-01-01T11:47:45.000Z\":0.845,\n            \"2022-01-01T12:08:34.000Z\":0.841,\n            \"2022-01-01T12:29:23.000Z\":0.841,\n            \"2022-01-01T12:50:12.000Z\":0.833,\n            \"2022-01-01T13:11:01.000Z\":0.84,\n            \"2022-01-01T13:31:50.000Z\":0.833,\n            \"2022-01-01T14:13:28.000Z\":0.833,\n            \"2022-01-01T14:34:17.000Z\":0.84,\n            \"2022-01-01T14:55:06.000Z\":0.8365,\n            \"2022-01-01T15:15:55.000Z\":0.84,\n            \"2022-01-01T15:36:44.000Z\":0.8405\n        },\n        \"rolling_deviation\":{\n            \"2022-01-01T00:41:37.000Z\":0.511497,\n            \"2022-01-01T01:02:26.000Z\":0.511497,\n            \"2022-01-01T01:23:15.000Z\":0.511497,\n            \"2022-01-01T01:44:04.000Z\":0.511497,\n            \"2022-01-01T02:04:53.000Z\":0.511497,\n            \"2022-01-01T02:25:42.000Z\":0.5159448,\n            \"2022-01-01T02:46:31.000Z\":0.7072002,\n            \"2022-01-01T03:07:20.000Z\":0.7072002,\n            \"2022-01-01T03:28:09.000Z\":0.8762166,\n            \"2022-01-01T03:48:58.000Z\":0.756126,\n            \"2022-01-01T04:09:47.000Z\":0.9963072,\n            \"2022-01-01T04:30:36.000Z\":0.8539776,\n            \"2022-01-01T04:51:25.000Z\":0.6582744,\n            \"2022-01-01T05:12:14.000Z\":0.9651726,\n            \"2022-01-01T05:33:03.000Z\":0.644931,\n            \"2022-01-01T05:53:52.000Z\":0.644931,\n            \"2022-01-01T06:14:41.000Z\":0.8272908,\n            \"2022-01-01T06:56:19.000Z\":0.8650971,\n            \"2022-01-01T10:03:40.000Z\":0.9607248,\n            \"2022-01-01T10:24:29.000Z\":0.7249914,\n            \"2022-01-01T10:45:18.000Z\":0.6805134,\n            \"2022-01-01T11:06:07.000Z\":0.511497,\n            \"2022-01-01T11:26:56.000Z\":0.511497,\n            \"2022-01-01T11:47:45.000Z\":0.511497,\n            \"2022-01-01T12:08:34.000Z\":0.511497,\n            \"2022-01-01T12:29:23.000Z\":0.511497,\n            \"2022-01-01T12:50:12.000Z\":0.511497,\n            \"2022-01-01T13:11:01.000Z\":0.511497,\n            \"2022-01-01T13:31:50.000Z\":0.511497,\n            \"2022-01-01T14:13:28.000Z\":0.511497,\n            \"2022-01-01T14:34:17.000Z\":0.511497,\n            \"2022-01-01T14:55:06.000Z\":0.511497,\n            \"2022-01-01T15:15:55.000Z\":0.511497,\n            \"2022-01-01T15:36:44.000Z\":0.5203926\n        },\n        \"filter_mask\":{\n            \"2022-01-01T00:00:00.000Z\":true,\n            \"2022-01-01T00:20:48.000Z\":true,\n            \"2022-01-01T00:41:37.000Z\":true,\n            \"2022-01-01T01:02:26.000Z\":true,\n            \"2022-01-01T01:23:15.000Z\":true,\n            \"2022-01-01T01:44:04.000Z\":true,\n            \"2022-01-01T02:04:53.000Z\":true,\n            \"2022-01-01T02:25:42.000Z\":true,\n            \"2022-01-01T02:46:31.000Z\":true,\n            \"2022-01-01T03:07:20.000Z\":true,\n            \"2022-01-01T03:28:09.000Z\":false,\n            \"2022-01-01T03:48:58.000Z\":true,\n            \"2022-01-01T04:09:47.000Z\":true,\n            \"2022-01-01T04:30:36.000Z\":true,\n            \"2022-01-01T04:51:25.000Z\":true,\n            \"2022-01-01T05:12:14.000Z\":true,\n            \"2022-01-01T05:33:03.000Z\":true,\n            \"2022-01-01T05:53:52.000Z\":false,\n            \"2022-01-01T06:14:41.000Z\":true,\n            \"2022-01-01T06:56:19.000Z\":true,\n            \"2022-01-01T07:17:08.000Z\":true,\n            \"2022-01-01T07:37:57.000Z\":true,\n            \"2022-01-01T07:58:46.000Z\":true,\n            \"2022-01-01T08:40:24.000Z\":true,\n            \"2022-01-01T10:03:40.000Z\":true,\n            \"2022-01-01T10:24:29.000Z\":true,\n            \"2022-01-01T10:45:18.000Z\":true,\n            \"2022-01-01T11:06:07.000Z\":false,\n            \"2022-01-01T11:26:56.000Z\":true,\n            \"2022-01-01T11:47:45.000Z\":true,\n            \"2022-01-01T12:08:34.000Z\":true,\n            \"2022-01-01T12:29:23.000Z\":true,\n            \"2022-01-01T12:50:12.000Z\":true,\n            \"2022-01-01T13:11:01.000Z\":true,\n            \"2022-01-01T13:31:50.000Z\":true,\n            \"2022-01-01T14:13:28.000Z\":true,\n            \"2022-01-01T14:34:17.000Z\":true,\n            \"2022-01-01T14:55:06.000Z\":true,\n            \"2022-01-01T15:15:55.000Z\":true,\n            \"2022-01-01T15:36:44.000Z\":true,\n            \"2022-01-01T15:57:33.000Z\":true,\n            \"2022-01-01T16:18:22.000Z\":true,\n            \"2022-01-01T16:39:11.000Z\":true,\n            \"2022-01-01T17:00:00.000Z\":true\n        }\n    }\n}\n```",
  "id": "ff2392cb-b0ff-4672-803f-4fb44ecca5b5",
  "io_interface": {
    "inputs": [
      {
        "data_type": "DATAFRAME",
        "id": "1393fcf7-0562-4b47-b655-144e3dac4106",
        "name": "band_filter_dataframe",
        "type": "REQUIRED"
      }
    ],
    "outputs": [
      {
        "data_type": "PLOTLYJSON",
        "id": "a36ab320-ae3d-48f0-b57c-5e541e987615",
        "name": "band_filter_plot"
      }
    ]
  },
  "name": "Band Filter Plot",
  "released_timestamp": "2022-11-24T16:55:17.221127+00:00",
  "revision_group_id": "02836778-e7d9-4352-952d-9927f34b58fe",
  "state": "RELEASED",
  "test_wiring": {
    "dashboard_positionings": [],
    "input_wirings": [
      {
        "adapter_id": "direct_provisioning",
        "filters": {
          "value": "{\n    \"values\": {\n        \"2022-01-01T00:00:00.000Z\":1.058,\n        \"2022-01-01T00:20:48.000Z\":0.699,\n        \"2022-01-01T00:41:37.000Z\":1.08,\n        \"2022-01-01T01:02:26.000Z\":1.054,\n        \"2022-01-01T01:23:15.000Z\":0.763,\n        \"2022-01-01T01:44:04.000Z\":1.034,\n        \"2022-01-01T02:04:53.000Z\":0.965,\n        \"2022-01-01T02:25:42.000Z\":0.601,\n        \"2022-01-01T02:46:31.000Z\":0.933,\n        \"2022-01-01T03:07:20.000Z\":1.081,\n        \"2022-01-01T03:28:09.000Z\":2.1,\n        \"2022-01-01T03:48:58.000Z\":0.988,\n        \"2022-01-01T04:09:47.000Z\":0.741,\n        \"2022-01-01T04:30:36.000Z\":0.647,\n        \"2022-01-01T04:51:25.000Z\":0.556,\n        \"2022-01-01T05:12:14.000Z\":0.453,\n        \"2022-01-01T05:33:03.000Z\":1.009,\n        \"2022-01-01T05:53:52.000Z\":1.72,\n        \"2022-01-01T06:14:41.000Z\":1.002,\n        \"2022-01-01T06:56:19.000Z\":0.857,\n        \"2022-01-01T07:17:08.000Z\":0.864,\n        \"2022-01-01T07:37:57.000Z\":0.606,\n        \"2022-01-01T07:58:46.000Z\":0.899,\n        \"2022-01-01T08:40:24.000Z\":0.62,\n        \"2022-01-01T10:03:40.000Z\":0.721,\n        \"2022-01-01T10:24:29.000Z\":1.193,\n        \"2022-01-01T10:45:18.000Z\":0.833,\n        \"2022-01-01T11:06:07.000Z\":2.06,\n        \"2022-01-01T11:26:56.000Z\":0.68,\n        \"2022-01-01T11:47:45.000Z\":1.136,\n        \"2022-01-01T12:08:34.000Z\":0.62,\n        \"2022-01-01T12:29:23.000Z\":0.946,\n        \"2022-01-01T12:50:12.000Z\":0.746,\n        \"2022-01-01T13:11:01.000Z\":0.833,\n        \"2022-01-01T13:31:50.000Z\":0.857,\n        \"2022-01-01T14:13:28.000Z\":0.947,\n        \"2022-01-01T14:34:17.000Z\":0.841,\n        \"2022-01-01T14:55:06.000Z\":0.668,\n        \"2022-01-01T15:15:55.000Z\":0.675,\n        \"2022-01-01T15:36:44.000Z\":0.84,\n        \"2022-01-01T15:57:33.000Z\":0.821,\n        \"2022-01-01T16:18:22.000Z\":0.625,\n        \"2022-01-01T16:39:11.000Z\":1.155,\n        \"2022-01-01T17:00:00.000Z\":0.968\n    },\n    \"band_center\":{\n        \"2022-01-01T00:41:37.000Z\":0.9995,\n        \"2022-01-01T01:02:26.000Z\":1.034,\n        \"2022-01-01T01:23:15.000Z\":1.011,\n        \"2022-01-01T01:44:04.000Z\":0.988,\n        \"2022-01-01T02:04:53.000Z\":0.9765,\n        \"2022-01-01T02:25:42.000Z\":0.965,\n        \"2022-01-01T02:46:31.000Z\":0.949,\n        \"2022-01-01T03:07:20.000Z\":0.949,\n        \"2022-01-01T03:28:09.000Z\":0.949,\n        \"2022-01-01T03:48:58.000Z\":0.9765,\n        \"2022-01-01T04:09:47.000Z\":0.965,\n        \"2022-01-01T04:30:36.000Z\":0.933,\n        \"2022-01-01T04:51:25.000Z\":0.933,\n        \"2022-01-01T05:12:14.000Z\":0.864,\n        \"2022-01-01T05:33:03.000Z\":0.864,\n        \"2022-01-01T05:53:52.000Z\":0.8605,\n        \"2022-01-01T06:14:41.000Z\":0.799,\n        \"2022-01-01T06:56:19.000Z\":0.8605,\n        \"2022-01-01T10:03:40.000Z\":0.866,\n        \"2022-01-01T10:24:29.000Z\":0.7895,\n        \"2022-01-01T10:45:18.000Z\":0.833,\n        \"2022-01-01T11:06:07.000Z\":0.833,\n        \"2022-01-01T11:26:56.000Z\":0.833,\n        \"2022-01-01T11:47:45.000Z\":0.845,\n        \"2022-01-01T12:08:34.000Z\":0.841,\n        \"2022-01-01T12:29:23.000Z\":0.841,\n        \"2022-01-01T12:50:12.000Z\":0.833,\n        \"2022-01-01T13:11:01.000Z\":0.84,\n        \"2022-01-01T13:31:50.000Z\":0.833,\n        \"2022-01-01T14:13:28.000Z\":0.833,\n        \"2022-01-01T14:34:17.000Z\":0.84,\n        \"2022-01-01T14:55:06.000Z\":0.8365,\n        \"2022-01-01T15:15:55.000Z\":0.84,\n        \"2022-01-01T15:36:44.000Z\":0.8405\n    },\n    \"rolling_deviation\":{\n        \"2022-01-01T00:41:37.000Z\":0.511497,\n        \"2022-01-01T01:02:26.000Z\":0.511497,\n        \"2022-01-01T01:23:15.000Z\":0.511497,\n        \"2022-01-01T01:44:04.000Z\":0.511497,\n        \"2022-01-01T02:04:53.000Z\":0.511497,\n        \"2022-01-01T02:25:42.000Z\":0.5159448,\n        \"2022-01-01T02:46:31.000Z\":0.7072002,\n        \"2022-01-01T03:07:20.000Z\":0.7072002,\n        \"2022-01-01T03:28:09.000Z\":0.8762166,\n        \"2022-01-01T03:48:58.000Z\":0.756126,\n        \"2022-01-01T04:09:47.000Z\":0.9963072,\n        \"2022-01-01T04:30:36.000Z\":0.8539776,\n        \"2022-01-01T04:51:25.000Z\":0.6582744,\n        \"2022-01-01T05:12:14.000Z\":0.9651726,\n        \"2022-01-01T05:33:03.000Z\":0.644931,\n        \"2022-01-01T05:53:52.000Z\":0.644931,\n        \"2022-01-01T06:14:41.000Z\":0.8272908,\n        \"2022-01-01T06:56:19.000Z\":0.8650971,\n        \"2022-01-01T10:03:40.000Z\":0.9607248,\n        \"2022-01-01T10:24:29.000Z\":0.7249914,\n        \"2022-01-01T10:45:18.000Z\":0.6805134,\n        \"2022-01-01T11:06:07.000Z\":0.511497,\n        \"2022-01-01T11:26:56.000Z\":0.511497,\n        \"2022-01-01T11:47:45.000Z\":0.511497,\n        \"2022-01-01T12:08:34.000Z\":0.511497,\n        \"2022-01-01T12:29:23.000Z\":0.511497,\n        \"2022-01-01T12:50:12.000Z\":0.511497,\n        \"2022-01-01T13:11:01.000Z\":0.511497,\n        \"2022-01-01T13:31:50.000Z\":0.511497,\n        \"2022-01-01T14:13:28.000Z\":0.511497,\n        \"2022-01-01T14:34:17.000Z\":0.511497,\n        \"2022-01-01T14:55:06.000Z\":0.511497,\n        \"2022-01-01T15:15:55.000Z\":0.511497,\n        \"2022-01-01T15:36:44.000Z\":0.5203926\n    },\n    \"filter_mask\":{\n        \"2022-01-01T00:00:00.000Z\":true,\n        \"2022-01-01T00:20:48.000Z\":true,\n        \"2022-01-01T00:41:37.000Z\":true,\n        \"2022-01-01T01:02:26.000Z\":true,\n        \"2022-01-01T01:23:15.000Z\":true,\n        \"2022-01-01T01:44:04.000Z\":true,\n        \"2022-01-01T02:04:53.000Z\":true,\n        \"2022-01-01T02:25:42.000Z\":true,\n        \"2022-01-01T02:46:31.000Z\":true,\n        \"2022-01-01T03:07:20.000Z\":true,\n        \"2022-01-01T03:28:09.000Z\":false,\n        \"2022-01-01T03:48:58.000Z\":true,\n        \"2022-01-01T04:09:47.000Z\":true,\n        \"2022-01-01T04:30:36.000Z\":true,\n        \"2022-01-01T04:51:25.000Z\":true,\n        \"2022-01-01T05:12:14.000Z\":true,\n        \"2022-01-01T05:33:03.000Z\":true,\n        \"2022-01-01T05:53:52.000Z\":false,\n        \"2022-01-01T06:14:41.000Z\":true,\n        \"2022-01-01T06:56:19.000Z\":true,\n        \"2022-01-01T07:17:08.000Z\":true,\n        \"2022-01-01T07:37:57.000Z\":true,\n        \"2022-01-01T07:58:46.000Z\":true,\n        \"2022-01-01T08:40:24.000Z\":true,\n        \"2022-01-01T10:03:40.000Z\":true,\n        \"2022-01-01T10:24:29.000Z\":true,\n        \"2022-01-01T10:45:18.000Z\":true,\n        \"2022-01-01T11:06:07.000Z\":false,\n        \"2022-01-01T11:26:56.000Z\":true,\n        \"2022-01-01T11:47:45.000Z\":true,\n        \"2022-01-01T12:08:34.000Z\":true,\n        \"2022-01-01T12:29:23.000Z\":true,\n        \"2022-01-01T12:50:12.000Z\":true,\n        \"2022-01-01T13:11:01.000Z\":true,\n        \"2022-01-01T13:31:50.000Z\":true,\n        \"2022-01-01T14:13:28.000Z\":true,\n        \"2022-01-01T14:34:17.000Z\":true,\n        \"2022-01-01T14:55:06.000Z\":true,\n        \"2022-01-01T15:15:55.000Z\":true,\n        \"2022-01-01T15:36:44.000Z\":true,\n        \"2022-01-01T15:57:33.000Z\":true,\n        \"2022-01-01T16:18:22.000Z\":true,\n        \"2022-01-01T16:39:11.000Z\":true,\n        \"2022-01-01T17:00:00.000Z\":true\n    }\n}"
        },
        "use_default_value": false,
        "workflow_input_name": "band_filter_dataframe"
      }
    ],
    "output_wirings": []
  },
  "type": "COMPONENT",
  "version_tag": "1.0.0"
}