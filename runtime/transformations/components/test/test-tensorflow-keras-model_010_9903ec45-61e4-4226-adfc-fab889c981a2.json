{
  "category": "Test",
  "content": "import numpy as np\nimport plotly.graph_objects as go\nimport plotly.io as pio\n\nfrom hetdesrun.utils import plotly_fig_to_json_dict\n\n\npio.templates.default = None\n\n\ndef f(x):\n    y = x**2 + 2*x - 5\n    return y\n\n\ndef plot_preds(x, y, f, model, title) -> go.Figure:\n    fig = go.Figure()\n\n    fig.add_trace(go.Scatter(x=x,y=y,mode=\"markers\",name=\"Data\"))\n    fig.add_trace(go.Scatter(x=np.sort(x),y=f(np.sort(x)),mode=\"lines\",name=\"Ground truth\"))\n    fig.add_trace(go.Scatter(x=np.sort(x),y=model(np.sort(x)),mode=\"lines\",name=\"Predictions\"))\n    \n    # Set the layout.\n    fig.update_layout(**{\n        \"autosize\": True,\n        \"height\": 200,\n    })\n\n    # Set margins.\n    fig.update_layout(margin=dict(l=0, r=0, b=0, t=5, pad=0))\n    fig.update_yaxes(automargin=True)\n    fig.update_xaxes(automargin=True)\n\n    return fig\n\n\n\n# ***** DO NOT EDIT LINES BELOW *****\n# These lines may be overwritten if component details or inputs/outputs change.\nCOMPONENT_INFO = {\n    \"inputs\": {\n        \"x\": \"SERIES\",\n        \"y\": \"SERIES\",\n        \"tensorflow_keras_model\": \"ANY\",\n    },\n    \"outputs\": {\n        \"plot\": \"PLOTLYJSON\",\n    },\n    \"name\": \"Test Tensorflow Keras Model\",\n    \"category\": \"Test\",\n    \"description\": \"Test and plot a simple tensorflow keras model\",\n    \"version_tag\": \"0.1.0\",\n    \"id\": \"9903ec45-61e4-4226-adfc-fab889c981a2\",\n    \"revision_group_id\": \"03927ed2-e753-4210-bfaf-e37dd7b02d51\",\n    \"state\": \"RELEASED\",\n    \"released_timestamp\": \"2023-03-22T09:23:40.658109+00:00\",\n}\n\n\ndef main(*, x, y, tensorflow_keras_model):\n    # entrypoint function for this component\n    # ***** DO NOT EDIT LINES ABOVE *****\n    # Create a basic model instance\n    # raise ValueError(f\"x has type {type(x)} and contains {len(x.values)} values\")\n    return {\"plot\": plotly_fig_to_json_dict(plot_preds(x.values, y.values, f, tensorflow_keras_model, 'After Training: Keras'))}",
  "description": "Test and plot a simple tensorflow keras model",
  "documentation": "# Test Tensorflow Keras Model\n\n## Description\nTest and plot a simple tensorflow keras model based on an example in the tensorflow tutorial: https://www.tensorflow.org/guide/basics\n\n## Inputs\n* **x** (Pandas Series): Inputs / Features\n* **y** (Pandas Series): Outputs / Labels\n* **tensorflow_keras_model** (Any): The trained model, i.e. an object of the class `tf.keras.models.Model` or `tf.keras.models.Sequential`, e.g. from the component \"Train Tensorflow Keras Model\" or from a stored object.\n \n## Outputs\n* **plot** (Plotly JSON): The generated Plotly JSON. This is used by the hetida designer frontend for plotting the results.\n\n## Details\n\nThis workflow cannot be executed with manual input. It is intended to be used with stored objects or in another workflow.",
  "id": "9903ec45-61e4-4226-adfc-fab889c981a2",
  "io_interface": {
    "inputs": [
      {
        "data_type": "SERIES",
        "id": "55cf3ea6-0b4f-46b1-ac10-2f077259e63c",
        "name": "x"
      },
      {
        "data_type": "SERIES",
        "id": "89c6ab99-dbff-46dc-9657-9f46a1a31604",
        "name": "y"
      },
      {
        "data_type": "ANY",
        "id": "e5f93ef5-0d2d-4198-8369-b57d144aa638",
        "name": "tensorflow_keras_model"
      }
    ],
    "outputs": [
      {
        "data_type": "PLOTLYJSON",
        "id": "3d03ccb1-d23f-4c3f-9c0f-1d1869651384",
        "name": "plot"
      }
    ]
  },
  "name": "Test Tensorflow Keras Model",
  "released_timestamp": "2023-03-22T09:23:40.658109+00:00",
  "revision_group_id": "03927ed2-e753-4210-bfaf-e37dd7b02d51",
  "state": "RELEASED",
  "test_wiring": {
    "input_wirings": [],
    "output_wirings": []
  },
  "type": "COMPONENT",
  "version_tag": "0.1.0"
}